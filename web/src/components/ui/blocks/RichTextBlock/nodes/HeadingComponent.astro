---
import slugifyId from '@/utils/slugifyId'
import type { HeadingNode, TextNode } from '../types'
import RichTextLexical from '../RichTextLexical.astro'

type Props = {
  node: HeadingNode
}

const { node } = Astro.props

const HeadingTag = node.tag ?? 'h1'
---

<HeadingTag
  id={(node.children?.[0] as TextNode)?.text && ['h2', 'h3'].includes(node.tag)
    ? slugifyId((node.children?.[0] as TextNode)?.text)
    : undefined}
>
  <RichTextLexical nodes={node.children ?? []} />
</HeadingTag>
